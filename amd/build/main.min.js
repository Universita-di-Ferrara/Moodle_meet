define("mod_gmeet/main",["exports","core_form/modalform","core/str","./ajax_call","core/toast"],(function(_exports,_modalform,_str,_ajax_call,_toast){var obj;
/**
   * TODO describe module main
   *
   * @module     mod_gmeet/main
   * @copyright  2024 YOUR NAME <your@email.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};const Selectors_actions={syncRecordings:'[data-action="mod_gmeet/sync_recordings"]',editRecording:"[data-role=editfield][data-id]"},registerEventListeners=()=>{document.addEventListener("click",(e=>{const editingRecordingelement=e.target.closest(Selectors_actions.editRecording),syncRecordingelement=e.target.closest(Selectors_actions.syncRecordings);if(editingRecordingelement){e.preventDefault();const recordingid=editingRecordingelement.getAttribute("data-id");(async id=>await(0,_ajax_call.getRecording)(id))(recordingid).then((values=>{const modalForm=new _modalform.default({formClass:"mod_gmeet\\recording_form",args:{id:recordingid,recordingname:values.name,recordingdescription:values.description},modalConfig:{title:(0,_str.get_string)("editingfield","mod_gmeet",editingRecordingelement.getAttribute("data-name"))},returnFocus:editingRecordingelement});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(e=>{const formdata=e.detail;(0,_toast.add)((0,_str.get_string)("edittoast","mod_gmeet")),(async recording=>await(0,_ajax_call.updateRecording)(recording))(formdata).then((()=>{location.reload()}))})),modalForm.show()}))}if(syncRecordingelement){e.preventDefault(),(0,_toast.add)((0,_str.get_string)("synctoast","mod_gmeet"));document.getElementById("syncForm").submit(),syncRecordingelement.disabled=!0}}))};_exports.init=()=>{registerEventListeners()}}));

//# sourceMappingURL=main.min.js.map